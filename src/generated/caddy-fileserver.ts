// Code generated by tygo. DO NOT EDIT.

import type { ModuleMap } from "./caddy-core";

//////////
// source: browse.go

/**
 * Browse configures directory browsing.
 */
export interface Browse {
  /**
   * Filename of the template to use instead of the embedded browse template.
   */
  template_file?: string;
  /**
   * Determines whether or not targets of symlinks should be revealed.
   */
  reveal_symlinks?: boolean;
  /**
   * Override the default sort.
   * It includes the following options:
   *   - sort_by: name(default), namedirfirst, size, time
   *   - order: asc(default), desc
   * eg.:
   *   - `sort time desc` will sort by time in descending order
   *   - `sort size` will sort by size in ascending order
   * The first option must be `sort_by` and the second option must be `order` (if exists).
   */
  sort?: string[];
  /**
   * FileLimit limits the number of up to n DirEntry values in directory order.
   */
  file_limit?: number /* int */;
}

//////////
// source: browsetplcontext.go

//////////
// source: matcher.go

/**
 * MatchFile is an HTTP request matcher that can match
 * requests based upon file existence.
 * Upon matching, three new placeholders will be made
 * available:
 * - `{http.matchers.file.relative}` The root-relative
 * path of the file. This is often useful when rewriting
 * requests.
 * - `{http.matchers.file.absolute}` The absolute path
 * of the matched file.
 * - `{http.matchers.file.type}` Set to "directory" if
 * the matched file is a directory, "file" otherwise.
 * - `{http.matchers.file.remainder}` Set to the remainder
 * of the path if the path was split by `split_path`.
 * Even though file matching may depend on the OS path
 * separator, the placeholder values always use /.
 */
export interface MatchFile {
  /**
   * The file system implementation to use. By default, the
   * local disk file system will be used.
   */
  fs?: string;
  /**
   * The root directory, used for creating absolute
   * file paths, and required when working with
   * relative paths; if not specified, `{http.vars.root}`
   * will be used, if set; otherwise, the current
   * directory is assumed. Accepts placeholders.
   */
  root?: string;
  /**
   * The list of files to try. Each path here is
   * considered related to Root. If nil, the request
   * URL's path will be assumed. Files and
   * directories are treated distinctly, so to match
   * a directory, the filepath MUST end in a forward
   * slash `/`. To match a regular file, there must
   * be no trailing slash. Accepts placeholders. If
   * the policy is "first_exist", then an error may
   * be triggered as a fallback by configuring "="
   * followed by a status code number,
   * for example "=404".
   */
  try_files?: string[];
  /**
   * How to choose a file in TryFiles. Can be:
   * - first_exist
   * - first_exist_fallback
   * - smallest_size
   * - largest_size
   * - most_recently_modified
   * Default is first_exist.
   */
  try_policy?: string;
  /**
   * A list of delimiters to use to split the path in two
   * when trying files. If empty, no splitting will
   * occur, and the path will be tried as-is. For each
   * split value, the left-hand side of the split,
   * including the split value, will be the path tried.
   * For example, the path `/remote.php/dav/` using the
   * split value `.php` would try the file `/remote.php`.
   * Each delimiter must appear at the end of a URI path
   * component in order to be used as a split delimiter.
   */
  split_path?: string[];
}

//////////
// source: staticfiles.go

/**
 * FileServer implements a handler that serves static files.
 * The path of the file to serve is constructed by joining the site root
 * and the sanitized request path. Any and all files within the root and
 * links with targets outside the site root may therefore be accessed.
 * For example, with a site root of `/www`, requests to `/foo/bar.txt`
 * will serve the file at `/www/foo/bar.txt`.
 * The request path is sanitized using the Go standard library's
 * path.Clean() function (https://pkg.go.dev/path#Clean) before being
 * joined to the root. Request paths must be valid and well-formed.
 * For requests that access directories instead of regular files,
 * Caddy will attempt to serve an index file if present. For example,
 * a request to `/dir/` will attempt to serve `/dir/index.html` if
 * it exists. The index file names to try are configurable. If a
 * requested directory does not have an index file, Caddy writes a
 * 404 response. Alternatively, file browsing can be enabled with
 * the "browse" parameter which shows a list of files when directories
 * are requested if no index file is present. If "browse" is enabled,
 * Caddy may serve a JSON array of the directory listing when the `Accept`
 * header mentions `application/json` with the following structure:
 * 	[{
 * 		"name": "",
 * 		"size": 0,
 * 		"url": "",
 * 		"mod_time": "",
 * 		"mode": 0,
 * 		"is_dir": false,
 * 		"is_symlink": false
 * 	}]
 * with the `url` being relative to the request path and `mod_time` in the RFC 3339 format
 * with sub-second precision. For any other value for the `Accept` header, the
 * respective browse template is executed with `Content-Type: text/html`.
 * By default, this handler will canonicalize URIs so that requests to
 * directories end with a slash, but requests to regular files do not.
 * This is enforced with HTTP redirects automatically and can be disabled.
 * Canonicalization redirects are not issued, however, if a URI rewrite
 * modified the last component of the path (the filename).
 * This handler sets the Etag and Last-Modified headers for static files.
 * It does not perform MIME sniffing to determine Content-Type based on
 * contents, but does use the extension (if known); see the Go docs for
 * details: https://pkg.go.dev/mime#TypeByExtension
 * The file server properly handles requests with If-Match,
 * If-Unmodified-Since, If-Modified-Since, If-None-Match, Range, and
 * If-Range headers. It includes the file's modification time in the
 * Last-Modified header of the response.
 */
export interface FileServer {
  /**
   * The file system implementation to use. By default, Caddy uses the local
   * disk file system.
   * if a non default filesystem is used, it must be first be registered in the globals section.
   */
  fs?: string;
  /**
   * The path to the root of the site. Default is `{http.vars.root}` if set,
   * or current working directory otherwise. This should be a trusted value.
   * Note that a site root is not a sandbox. Although the file server does
   * sanitize the request URI to prevent directory traversal, files (including
   * links) within the site root may be directly accessed based on the request
   * path. Files and folders within the root should be secure and trustworthy.
   */
  root?: string;
  /**
   * A list of files or folders to hide; the file server will pretend as if
   * they don't exist. Accepts globular patterns like `*.ext` or `/foo/*\/bar`
   * as well as placeholders. Because site roots can be dynamic, this list
   * uses file system paths, not request paths. To clarify, the base of
   * relative paths is the current working directory, NOT the site root.
   * Entries without a path separator (`/` or `\` depending on OS) will match
   * any file or directory of that name regardless of its path. To hide only a
   * specific file with a name that may not be unique, always use a path
   * separator. For example, to hide all files or folder trees named "hidden",
   * put "hidden" in the list. To hide only ./hidden, put "./hidden" in the list.
   * When possible, all paths are resolved to their absolute form before
   * comparisons are made. For maximum clarity and explictness, use complete,
   * absolute paths; or, for greater portability, use relative paths instead.
   */
  hide?: string[];
  /**
   * The names of files to try as index files if a folder is requested.
   * Default: index.html, index.txt.
   */
  index_names?: string[];
  /**
   * Enables file listings if a directory was requested and no index
   * file is present.
   */
  browse?: Browse;
  /**
   * Use redirects to enforce trailing slashes for directories, or to
   * remove trailing slash from URIs for files. Default is true.
   * Canonicalization will not happen if the last element of the request's
   * path (the filename) is changed in an internal rewrite, to avoid
   * clobbering the explicit rewrite with implicit behavior.
   */
  canonical_uris?: boolean;
  /**
   * Override the status code written when successfully serving a file.
   * Particularly useful when explicitly serving a file as display for
   * an error, like a 404 page. A placeholder may be used. By default,
   * the status code will typically be 200, or 206 for partial content.
   */
  status_code?: any /* caddyhttp.WeakString */;
  /**
   * If pass-thru mode is enabled and a requested file is not found,
   * it will invoke the next handler in the chain instead of returning
   * a 404 error. By default, this is false (disabled).
   */
  pass_thru?: boolean;
  /**
   * Selection of encoders to use to check for precompressed files.
   */
  precompressed?: ModuleMap;
  /**
   * If the client has no strong preference (q-factor), choose these encodings in order.
   * If no order specified here, the first encoding from the Accept-Encoding header
   * that both client and server support is used
   */
  precompressed_order?: string[];
  /**
   * List of file extensions to try to read Etags from.
   * If set, file Etags will be read from sidecar files
   * with any of these suffixes, instead of generating
   * our own Etag.
   * Keep in mind that the Etag values in the files have to be quoted as per RFC7232.
   * See https://datatracker.ietf.org/doc/html/rfc7232#section-2.3 for a few examples.
   */
  etag_file_extensions?: string[];
}

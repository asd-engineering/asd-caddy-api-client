<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@accelerated-software-development/caddy-api-client - v0.2.1</title><meta name="description" content="Documentation for @accelerated-software-development/caddy-api-client"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">@accelerated-software-development/caddy-api-client - v0.2.1</a><div id="tsd-toolbar-links"><a href="https://github.com/asd-engineering/asd-caddy-api-client">GitHub</a><a href="https://github.com/asd-engineering/asd-caddy-api-client/tree/main/src/__tests__/integration">Integration Tests</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@accelerated-software-development/caddy-api-client - v0.2.1</h1></div><div class="tsd-panel tsd-typography"><h1 id="accelerated-software-developmentcaddy-api-client" class="tsd-anchor-link">@accelerated-software-development/caddy-api-client<a href="#accelerated-software-developmentcaddy-api-client" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>TypeScript client for Caddy Admin API with MITMproxy integration.</p>
<h2 id="features" class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>✅ <strong>Type-safe Caddy API client</strong> - Full TypeScript support with Zod validation</li>
<li>✅ <strong>Route builders</strong> - Composable functions for building Caddy routes</li>
<li>✅ <strong>Domain management</strong> - TLS automation with Let's Encrypt</li>
<li>✅ <strong>Load balancing</strong> - Health checks and multiple upstream support</li>
<li>✅ <strong>MITMweb integration</strong> - Traffic inspection for tunnels</li>
<li>✅ <strong>Zero runtime dependencies</strong> - Only peer dependency: <code>zod</code></li>
</ul>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@accelerated-software-development/caddy-api-client</span><span class="hl-1"> </span><span class="hl-2">zod</span><br/><span class="hl-3"># or</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">@accelerated-software-development/caddy-api-client</span><span class="hl-1"> </span><span class="hl-2">zod</span>
</code><button type="button">Copy</button></pre>

<h2 id="quick-start" class="tsd-anchor-link">Quick Start<a href="#quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">CaddyClient</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">buildServiceRoutes</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@accelerated-software-development/caddy-api-client/caddy&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Create client</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CaddyClient</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">adminUrl:</span><span class="hl-1"> </span><span class="hl-2">&quot;http://127.0.0.1:2019&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Build routes with type-safe builders</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">routes</span><span class="hl-1"> = </span><span class="hl-0">buildServiceRoutes</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">host:</span><span class="hl-1"> </span><span class="hl-2">&quot;api.localhost&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">dial:</span><span class="hl-1"> </span><span class="hl-2">&quot;127.0.0.1:3000&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">securityHeaders:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">enableHsts:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">frameOptions:</span><span class="hl-1"> </span><span class="hl-2">&quot;DENY&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Add routes to Caddy</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">addRoutes</span><span class="hl-1">(</span><span class="hl-2">&quot;https_server&quot;</span><span class="hl-1">, </span><span class="hl-5">routes</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p><strong>⚠️ Important:</strong> Always use our type-safe builder functions instead of constructing raw Caddy JSON objects. Our builders provide:</p>
<ul>
<li>✅ Full TypeScript type checking and IDE autocomplete</li>
<li>✅ Runtime Zod schema validation</li>
<li>✅ Protection against common configuration errors</li>
<li>✅ Clear documentation and examples</li>
</ul>
<p><strong>Raw Caddy JSON is error-prone and breaks easily.</strong> Our builders are tested, validated, and prevent mistakes.</p>
</blockquote>
<h2 id="usage" class="tsd-anchor-link">Usage<a href="#usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="basic-route-management" class="tsd-anchor-link">Basic Route Management<a href="#basic-route-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">CaddyClient</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">buildServiceRoutes</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@accelerated-software-development/caddy-api-client/caddy&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CaddyClient</span><span class="hl-1">();</span><br/><br/><span class="hl-3">// Build host-based route</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">routes</span><span class="hl-1"> = </span><span class="hl-0">buildServiceRoutes</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">host:</span><span class="hl-1"> </span><span class="hl-2">&quot;api.localhost&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">dial:</span><span class="hl-1"> </span><span class="hl-2">&quot;127.0.0.1:3000&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">serviceId:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-api&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Add routes</span><br/><span class="hl-4">for</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">route</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-5">routes</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">addRoute</span><span class="hl-1">(</span><span class="hl-2">&quot;https_server&quot;</span><span class="hl-1">, </span><span class="hl-5">route</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">// Get all routes</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">allRoutes</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">getRoutes</span><span class="hl-1">(</span><span class="hl-2">&quot;https_server&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// Remove routes by hostname</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">removed</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">removeRoutesByHost</span><span class="hl-1">(</span><span class="hl-2">&quot;old-api.localhost&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="path-based-routes" class="tsd-anchor-link">Path-based Routes<a href="#path-based-routes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">buildServiceRoutes</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@accelerated-software-development/caddy-api-client/caddy&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">routes</span><span class="hl-1"> = </span><span class="hl-0">buildServiceRoutes</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;/api&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">pathRouteHost:</span><span class="hl-1"> </span><span class="hl-2">&quot;example.localhost&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">dial:</span><span class="hl-1"> </span><span class="hl-2">&quot;127.0.0.1:3000&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">stripPrefix:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">, </span><span class="hl-3">// Strip /api before forwarding</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="load-balancing" class="tsd-anchor-link">Load Balancing<a href="#load-balancing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">CaddyClient</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">buildLoadBalancerRoute</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@accelerated-software-development/caddy-api-client/caddy&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CaddyClient</span><span class="hl-1">();</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lbRoute</span><span class="hl-1"> = </span><span class="hl-0">buildLoadBalancerRoute</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">host:</span><span class="hl-1"> </span><span class="hl-2">&quot;api.localhost&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">upstreams:</span><span class="hl-1"> [</span><span class="hl-2">&quot;127.0.0.1:3000&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;127.0.0.1:3001&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;127.0.0.1:3002&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-5">policy:</span><span class="hl-1"> </span><span class="hl-2">&quot;round_robin&quot;</span><span class="hl-1">, </span><span class="hl-3">// or &quot;first&quot;, &quot;random&quot;, &quot;least_conn&quot;</span><br/><span class="hl-1">  </span><span class="hl-5">healthCheckPath:</span><span class="hl-1"> </span><span class="hl-2">&quot;/health&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">healthCheckInterval:</span><span class="hl-1"> </span><span class="hl-2">&quot;10s&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">addRoute</span><span class="hl-1">(</span><span class="hl-2">&quot;https_server&quot;</span><span class="hl-1">, </span><span class="hl-5">lbRoute</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="security-headers" class="tsd-anchor-link">Security Headers<a href="#security-headers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">buildServiceRoutes</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@accelerated-software-development/caddy-api-client/caddy&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">routes</span><span class="hl-1"> = </span><span class="hl-0">buildServiceRoutes</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">host:</span><span class="hl-1"> </span><span class="hl-2">&quot;secure.localhost&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">dial:</span><span class="hl-1"> </span><span class="hl-2">&quot;127.0.0.1:3000&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">securityHeaders:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">enableHsts:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">hstsMaxAge:</span><span class="hl-1"> </span><span class="hl-8">31536000</span><span class="hl-1">, </span><span class="hl-3">// 1 year</span><br/><span class="hl-1">    </span><span class="hl-5">frameOptions:</span><span class="hl-1"> </span><span class="hl-2">&quot;DENY&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">enableCompression:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="basic-authentication" class="tsd-anchor-link">Basic Authentication<a href="#basic-authentication" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">buildServiceRoutes</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@accelerated-software-development/caddy-api-client/caddy&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">routes</span><span class="hl-1"> = </span><span class="hl-0">buildServiceRoutes</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">host:</span><span class="hl-1"> </span><span class="hl-2">&quot;admin.localhost&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">dial:</span><span class="hl-1"> </span><span class="hl-2">&quot;127.0.0.1:3000&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">basicAuth:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">enabled:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">username:</span><span class="hl-1"> </span><span class="hl-2">&quot;admin&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">passwordHash:</span><span class="hl-1"> </span><span class="hl-2">&quot;$2y$10$...&quot;</span><span class="hl-1">, </span><span class="hl-3">// bcrypt hash</span><br/><span class="hl-1">    </span><span class="hl-5">realm:</span><span class="hl-1"> </span><span class="hl-2">&quot;Admin Area&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="mitmproxy-integration" class="tsd-anchor-link">MITMproxy Integration<a href="#mitmproxy-integration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Transparently inspect HTTP traffic for debugging production services <strong>without modifying client or backend code, and without service restarts.</strong></p>
<h4 id="quick-start-1" class="tsd-anchor-link">Quick Start<a href="#quick-start-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="bash"><span class="hl-3"># 1. Start MITMproxy in Docker</span><br/><span class="hl-0">docker</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-6">-d</span><span class="hl-1"> </span><span class="hl-9">\</span><br/><span class="hl-1">  </span><span class="hl-6">-p</span><span class="hl-1"> </span><span class="hl-2">8082:8080</span><span class="hl-1"> </span><span class="hl-9">\</span><br/><span class="hl-1">  </span><span class="hl-6">-p</span><span class="hl-1"> </span><span class="hl-2">8081:8081</span><span class="hl-1"> </span><span class="hl-9">\</span><br/><span class="hl-1">  </span><span class="hl-6">--name</span><span class="hl-1"> </span><span class="hl-2">mitmproxy</span><span class="hl-1"> </span><span class="hl-9">\</span><br/><span class="hl-1">  </span><span class="hl-2">mitmproxy/mitmproxy:10.4.2</span><span class="hl-1"> </span><span class="hl-9">\</span><br/><span class="hl-1">  </span><span class="hl-2">mitmweb</span><span class="hl-1"> </span><span class="hl-9">\</span><br/><span class="hl-1">  </span><span class="hl-6">--mode</span><span class="hl-1"> </span><span class="hl-2">reverse:http://your-backend:3000</span><span class="hl-1"> </span><span class="hl-9">\</span><br/><span class="hl-1">  </span><span class="hl-6">--web-host</span><span class="hl-1"> </span><span class="hl-8">0.0.0.0</span><span class="hl-1"> </span><span class="hl-9">\</span><br/><span class="hl-1">  </span><span class="hl-6">--listen-host</span><span class="hl-1"> </span><span class="hl-8">0.0.0.0</span><span class="hl-1"> </span><span class="hl-9">\</span><br/><span class="hl-1">  </span><span class="hl-6">--no-web-open-browser</span><span class="hl-1"> </span><span class="hl-9">\</span><br/><span class="hl-1">  </span><span class="hl-6">--set</span><span class="hl-1"> </span><span class="hl-2">keep_host_header=</span><span class="hl-6">true</span>
</code><button type="button">Copy</button></pre>

<pre><code class="typescript"><span class="hl-3">// 2. Enable traffic inspection (zero downtime)</span><br/><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">CaddyClient</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">buildMitmproxyRoute</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@accelerated-software-development/caddy-api-client/caddy&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CaddyClient</span><span class="hl-1">({ </span><span class="hl-5">adminUrl:</span><span class="hl-1"> </span><span class="hl-2">&quot;http://localhost:2019&quot;</span><span class="hl-1"> });</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">route</span><span class="hl-1"> = </span><span class="hl-0">buildMitmproxyRoute</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">host:</span><span class="hl-1"> </span><span class="hl-2">&quot;api.example.com&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">mitmproxyHost:</span><span class="hl-1"> </span><span class="hl-2">&quot;localhost&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">mitmproxyPort:</span><span class="hl-1"> </span><span class="hl-8">8082</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">addRoute</span><span class="hl-1">(</span><span class="hl-2">&quot;https_server&quot;</span><span class="hl-1">, </span><span class="hl-5">route</span><span class="hl-1">, </span><span class="hl-2">&quot;api_debug&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// 3. View captured traffic at http://localhost:8081</span><br/><br/><span class="hl-3">// 4. Disable when done (zero downtime)</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">removeRouteById</span><span class="hl-1">(</span><span class="hl-2">&quot;https_server&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;api_debug&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h4 id="hot-swapping-between-direct-and-proxied-routing" class="tsd-anchor-link">Hot-Swapping Between Direct and Proxied Routing<a href="#hot-swapping-between-direct-and-proxied-routing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Use <code>buildMitmproxyRoutePair()</code> to easily toggle traffic inspection on/off:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">CaddyClient</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">buildMitmproxyRoutePair</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@accelerated-software-development/caddy-api-client/caddy&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CaddyClient</span><span class="hl-1">({ </span><span class="hl-5">adminUrl:</span><span class="hl-1"> </span><span class="hl-2">&quot;http://localhost:2019&quot;</span><span class="hl-1"> });</span><br/><br/><span class="hl-3">// Create both direct and proxied routes</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">routes</span><span class="hl-1"> = </span><span class="hl-0">buildMitmproxyRoutePair</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">host:</span><span class="hl-1"> </span><span class="hl-2">&quot;api.example.com&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">backendHost:</span><span class="hl-1"> </span><span class="hl-2">&quot;api-service&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">backendPort:</span><span class="hl-1"> </span><span class="hl-8">3000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">mitmproxyHost:</span><span class="hl-1"> </span><span class="hl-2">&quot;localhost&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">mitmproxyPort:</span><span class="hl-1"> </span><span class="hl-8">8082</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">routeId:</span><span class="hl-1"> </span><span class="hl-2">&quot;api_route&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Start with direct routing (no inspection)</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">addRoute</span><span class="hl-1">(</span><span class="hl-2">&quot;https_server&quot;</span><span class="hl-1">, </span><span class="hl-5">routes</span><span class="hl-1">.</span><span class="hl-5">direct</span><span class="hl-1">, </span><span class="hl-5">routes</span><span class="hl-1">.</span><span class="hl-5">direct</span><span class="hl-1">[</span><span class="hl-2">&quot;@id&quot;</span><span class="hl-1">]);</span><br/><br/><span class="hl-3">// Hot-swap to enable inspection (zero downtime)</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">removeRouteById</span><span class="hl-1">(</span><span class="hl-2">&quot;https_server&quot;</span><span class="hl-1">, </span><span class="hl-5">routes</span><span class="hl-1">.</span><span class="hl-5">direct</span><span class="hl-1">[</span><span class="hl-2">&quot;@id&quot;</span><span class="hl-1">]);</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">addRoute</span><span class="hl-1">(</span><span class="hl-2">&quot;https_server&quot;</span><span class="hl-1">, </span><span class="hl-5">routes</span><span class="hl-1">.</span><span class="hl-5">proxied</span><span class="hl-1">, </span><span class="hl-5">routes</span><span class="hl-1">.</span><span class="hl-5">proxied</span><span class="hl-1">[</span><span class="hl-2">&quot;@id&quot;</span><span class="hl-1">]);</span><br/><br/><span class="hl-3">// Hot-swap back to disable inspection</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">removeRouteById</span><span class="hl-1">(</span><span class="hl-2">&quot;https_server&quot;</span><span class="hl-1">, </span><span class="hl-5">routes</span><span class="hl-1">.</span><span class="hl-5">proxied</span><span class="hl-1">[</span><span class="hl-2">&quot;@id&quot;</span><span class="hl-1">]);</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">addRoute</span><span class="hl-1">(</span><span class="hl-2">&quot;https_server&quot;</span><span class="hl-1">, </span><span class="hl-5">routes</span><span class="hl-1">.</span><span class="hl-5">direct</span><span class="hl-1">, </span><span class="hl-5">routes</span><span class="hl-1">.</span><span class="hl-5">direct</span><span class="hl-1">[</span><span class="hl-2">&quot;@id&quot;</span><span class="hl-1">]);</span>
</code><button type="button">Copy</button></pre>

<h4 id="load-balancing-with-mitmproxy" class="tsd-anchor-link">Load Balancing with MITMproxy<a href="#load-balancing-with-mitmproxy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Route some traffic through MITMproxy while keeping the rest direct:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">CaddyClient</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">buildLoadBalancerRoute</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@accelerated-software-development/caddy-api-client/caddy&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CaddyClient</span><span class="hl-1">();</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lbRoute</span><span class="hl-1"> = </span><span class="hl-0">buildLoadBalancerRoute</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">host:</span><span class="hl-1"> </span><span class="hl-2">&quot;api.localhost&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">upstreams:</span><span class="hl-1"> [</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;localhost:8082&quot;</span><span class="hl-1">, </span><span class="hl-3">// MITMproxy (captures traffic)</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;localhost:3000&quot;</span><span class="hl-1">, </span><span class="hl-3">// Direct to backend</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  </span><span class="hl-5">policy:</span><span class="hl-1"> </span><span class="hl-2">&quot;round_robin&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">addRoute</span><span class="hl-1">(</span><span class="hl-2">&quot;https_server&quot;</span><span class="hl-1">, </span><span class="hl-5">lbRoute</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h4 id="docker-compose-setup" class="tsd-anchor-link">Docker Compose Setup<a href="#docker-compose-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="yaml"><span class="hl-10">services</span><span class="hl-1">:</span><br/><span class="hl-1">  </span><span class="hl-10">mitmproxy</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-10">image</span><span class="hl-1">: </span><span class="hl-11">mitmproxy/mitmproxy:10.4.2</span><br/><span class="hl-1">    </span><span class="hl-10">ports</span><span class="hl-1">:</span><br/><span class="hl-1">      - </span><span class="hl-2">&quot;8082:8080&quot;</span><span class="hl-1"> </span><span class="hl-3"># Proxy port</span><br/><span class="hl-1">      - </span><span class="hl-2">&quot;8081:8081&quot;</span><span class="hl-1"> </span><span class="hl-3"># Web UI</span><br/><span class="hl-1">    </span><span class="hl-10">command</span><span class="hl-1">: </span><span class="hl-4">&gt;</span><br/><span class="hl-11">      mitmweb</span><br/><span class="hl-11">      --mode reverse:http://backend:3000</span><br/><span class="hl-11">      --web-host 0.0.0.0</span><br/><span class="hl-11">      --web-port 8081</span><br/><span class="hl-11">      --listen-host 0.0.0.0</span><br/><span class="hl-11">      --listen-port 8080</span><br/><span class="hl-11">      --no-web-open-browser</span><br/><span class="hl-11">      --set keep_host_header=true</span><br/><span class="hl-1">    </span><span class="hl-10">restart</span><span class="hl-1">: </span><span class="hl-11">unless-stopped</span><br/><br/><span class="hl-1">  </span><span class="hl-10">backend</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-10">image</span><span class="hl-1">: </span><span class="hl-11">your-backend-image</span><br/><span class="hl-1">    </span><span class="hl-10">ports</span><span class="hl-1">:</span><br/><span class="hl-1">      - </span><span class="hl-2">&quot;3000:3000&quot;</span>
</code><button type="button">Copy</button></pre>

<p><strong>Features:</strong></p>
<ul>
<li>✅ Zero client/backend code changes</li>
<li>✅ Zero service restarts required</li>
<li>✅ Hot-swappable at runtime</li>
<li>✅ Complete request/response inspection</li>
<li>✅ Web UI for viewing captured traffic</li>
<li>✅ Production-safe (tested with concurrent requests)</li>
</ul>
<p><strong>Troubleshooting:</strong> See the <a href="https://github.com/asd-engineering/asd-caddy-api-client/blob/main/docs/mitmproxy-troubleshooting.md">MITMproxy Troubleshooting Guide</a> for common issues and solutions.</p>
<h3 id="domain-management" class="tsd-anchor-link">Domain Management<a href="#domain-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">addDomainWithAutoTls</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">deleteDomain</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@accelerated-software-development/caddy-api-client/caddy&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Add domain with automatic TLS (Let&#39;s Encrypt)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">domain</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">addDomainWithAutoTls</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">domain:</span><span class="hl-1"> </span><span class="hl-2">&quot;example.com&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">target:</span><span class="hl-1"> </span><span class="hl-2">&quot;127.0.0.1&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">targetPort:</span><span class="hl-1"> </span><span class="hl-8">3000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">enableHsts:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">redirectMode:</span><span class="hl-1"> </span><span class="hl-2">&quot;permanent&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Delete domain</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">deleteDomain</span><span class="hl-1">({ </span><span class="hl-5">domain:</span><span class="hl-1"> </span><span class="hl-2">&quot;example.com&quot;</span><span class="hl-1"> });</span>
</code><button type="button">Copy</button></pre>

<h2 id="api-reference" class="tsd-anchor-link">API Reference<a href="#api-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="caddyclient" class="tsd-anchor-link">CaddyClient<a href="#caddyclient" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-12">CaddyClient</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">?: </span><span class="hl-12">CaddyClientOptions</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// Configuration</span><br/><span class="hl-1">  </span><span class="hl-0">getConfig</span><span class="hl-1">(): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">unknown</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-0">reload</span><span class="hl-1">(): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">void</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-0">stop</span><span class="hl-1">(): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">void</span><span class="hl-1">&gt;; </span><span class="hl-3">// Gracefully stop Caddy server</span><br/><span class="hl-1">  </span><span class="hl-0">adapt</span><span class="hl-1">(</span><span class="hl-5">config</span><span class="hl-1">: </span><span class="hl-12">string</span><span class="hl-1">, </span><span class="hl-5">adapter</span><span class="hl-1">?: </span><span class="hl-12">string</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">unknown</span><span class="hl-1">&gt;; </span><span class="hl-3">// Convert Caddyfile to JSON</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// Routes</span><br/><span class="hl-1">  </span><span class="hl-0">getRoutes</span><span class="hl-1">(</span><span class="hl-5">server</span><span class="hl-1">: </span><span class="hl-12">string</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">CaddyRoute</span><span class="hl-1">[]&gt;;</span><br/><span class="hl-1">  </span><span class="hl-0">addRoute</span><span class="hl-1">(</span><span class="hl-5">server</span><span class="hl-1">: </span><span class="hl-12">string</span><span class="hl-1">, </span><span class="hl-5">route</span><span class="hl-1">: </span><span class="hl-12">CaddyRoute</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">boolean</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-0">addRoutes</span><span class="hl-1">(</span><span class="hl-5">server</span><span class="hl-1">: </span><span class="hl-12">string</span><span class="hl-1">, </span><span class="hl-5">routes</span><span class="hl-1">: </span><span class="hl-12">CaddyRoute</span><span class="hl-1">[]): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;{ </span><span class="hl-5">added</span><span class="hl-1">: </span><span class="hl-12">number</span><span class="hl-1">; </span><span class="hl-5">skipped</span><span class="hl-1">: </span><span class="hl-12">number</span><span class="hl-1"> }&gt;;</span><br/><span class="hl-1">  </span><span class="hl-0">patchRoutes</span><span class="hl-1">(</span><span class="hl-5">server</span><span class="hl-1">: </span><span class="hl-12">string</span><span class="hl-1">, </span><span class="hl-5">routes</span><span class="hl-1">: </span><span class="hl-12">CaddyRoute</span><span class="hl-1">[]): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">void</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-0">insertRoute</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-5">server</span><span class="hl-1">: </span><span class="hl-12">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">route</span><span class="hl-1">: </span><span class="hl-12">CaddyRoute</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">position</span><span class="hl-1">?: </span><span class="hl-2">&quot;beginning&quot;</span><span class="hl-1"> | </span><span class="hl-2">&quot;end&quot;</span><span class="hl-1"> | </span><span class="hl-2">&quot;after-health-checks&quot;</span><br/><span class="hl-1">  ): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">void</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-0">replaceRouteById</span><span class="hl-1">(</span><span class="hl-5">server</span><span class="hl-1">: </span><span class="hl-12">string</span><span class="hl-1">, </span><span class="hl-5">id</span><span class="hl-1">: </span><span class="hl-12">string</span><span class="hl-1">, </span><span class="hl-5">newRoute</span><span class="hl-1">: </span><span class="hl-12">CaddyRoute</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">boolean</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-0">removeRouteById</span><span class="hl-1">(</span><span class="hl-5">server</span><span class="hl-1">: </span><span class="hl-12">string</span><span class="hl-1">, </span><span class="hl-5">id</span><span class="hl-1">: </span><span class="hl-12">string</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">boolean</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-0">removeRoutesByHost</span><span class="hl-1">(</span><span class="hl-5">hostname</span><span class="hl-1">: </span><span class="hl-12">string</span><span class="hl-1">, </span><span class="hl-5">server</span><span class="hl-1">?: </span><span class="hl-12">string</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">number</span><span class="hl-1">&gt;;</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// Servers</span><br/><span class="hl-1">  </span><span class="hl-0">getServers</span><span class="hl-1">(): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">unknown</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-0">getServerConfig</span><span class="hl-1">(</span><span class="hl-5">server</span><span class="hl-1">: </span><span class="hl-12">string</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">Record</span><span class="hl-1">&lt;</span><span class="hl-12">string</span><span class="hl-1">, </span><span class="hl-12">unknown</span><span class="hl-1">&gt;&gt;;</span><br/><span class="hl-1">  </span><span class="hl-0">patchServer</span><span class="hl-1">(</span><span class="hl-5">serverConfig</span><span class="hl-1">: </span><span class="hl-12">Record</span><span class="hl-1">&lt;</span><span class="hl-12">string</span><span class="hl-1">, </span><span class="hl-12">unknown</span><span class="hl-1">&gt;): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">void</span><span class="hl-1">&gt;;</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// Upstreams (reverse proxy status)</span><br/><span class="hl-1">  </span><span class="hl-0">getUpstreams</span><span class="hl-1">(): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">UpstreamStatus</span><span class="hl-1">[]&gt;; </span><span class="hl-3">// Get health/status of upstream servers</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// Version</span><br/><span class="hl-1">  </span><span class="hl-0">getVersion</span><span class="hl-1">(): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">unknown</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="route-builders" class="tsd-anchor-link">Route Builders<a href="#route-builders" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// Service routes (host + path based)</span><br/><span class="hl-0">buildServiceRoutes</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">: </span><span class="hl-5">ServiceRouteOptions</span><span class="hl-1">): </span><span class="hl-5">CaddyRoute</span><span class="hl-1">[];</span><br/><br/><span class="hl-3">// Individual route types</span><br/><span class="hl-0">buildHealthCheckRoute</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">: </span><span class="hl-5">HealthCheckRouteOptions</span><span class="hl-1">): </span><span class="hl-5">CaddyRoute</span><span class="hl-1">;</span><br/><span class="hl-0">buildHostRoute</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">: </span><span class="hl-5">HostRouteOptions</span><span class="hl-1">): </span><span class="hl-5">CaddyRoute</span><span class="hl-1">;</span><br/><span class="hl-0">buildPathRoute</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">: </span><span class="hl-5">PathRouteOptions</span><span class="hl-1">): </span><span class="hl-5">CaddyRoute</span><span class="hl-1">;</span><br/><span class="hl-0">buildLoadBalancerRoute</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">: </span><span class="hl-5">LoadBalancerRouteOptions</span><span class="hl-1">): </span><span class="hl-5">CaddyRoute</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// MITMproxy integration</span><br/><span class="hl-0">buildMitmproxyRoute</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">: </span><span class="hl-5">MitmproxyRouteOptions</span><span class="hl-1">): </span><span class="hl-5">CaddyRoute</span><span class="hl-1">;</span><br/><span class="hl-0">buildMitmproxyRoutePair</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">: </span><span class="hl-5">MitmproxyRoutePairOptions</span><span class="hl-1">): { </span><span class="hl-5">direct:</span><span class="hl-1"> </span><span class="hl-5">CaddyRoute</span><span class="hl-1">; </span><span class="hl-5">proxied</span><span class="hl-1">: </span><span class="hl-5">CaddyRoute</span><span class="hl-1"> };</span><br/><br/><span class="hl-3">// Handlers</span><br/><span class="hl-0">buildReverseProxyHandler</span><span class="hl-1">(</span><span class="hl-5">dial</span><span class="hl-1">: </span><span class="hl-5">DialAddress</span><span class="hl-1">): </span><span class="hl-5">CaddyRouteHandler</span><span class="hl-1">;</span><br/><span class="hl-0">buildSecurityHeadersHandler</span><span class="hl-1">(</span><span class="hl-5">headers</span><span class="hl-1">: </span><span class="hl-5">SecurityHeaders</span><span class="hl-1">): </span><span class="hl-5">CaddyRouteHandler</span><span class="hl-1">;</span><br/><span class="hl-0">buildBasicAuthHandler</span><span class="hl-1">(</span><span class="hl-5">auth</span><span class="hl-1">: </span><span class="hl-5">BasicAuthOptions</span><span class="hl-1">): </span><span class="hl-5">CaddyRouteHandler</span><span class="hl-1">;</span><br/><span class="hl-0">buildRewriteHandler</span><span class="hl-1">(</span><span class="hl-5">prefix</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">): </span><span class="hl-5">CaddyRouteHandler</span><span class="hl-1">;</span><br/><span class="hl-0">buildIngressTagHeadersHandler</span><span class="hl-1">(</span><span class="hl-5">tag</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">): </span><span class="hl-5">CaddyRouteHandler</span><span class="hl-1">;</span><br/><span class="hl-0">buildIframeHeadersHandler</span><span class="hl-1">(</span><span class="hl-5">allowedOrigin</span><span class="hl-1">?: </span><span class="hl-5">string</span><span class="hl-1">): </span><span class="hl-5">CaddyRouteHandler</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<h3 id="mitmweb-functions" class="tsd-anchor-link">MITMweb Functions<a href="#mitmweb-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// Installation &amp; status</span><br/><span class="hl-0">isMitmproxyInstalled</span><span class="hl-1">(): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-5">boolean</span><span class="hl-1">&gt;;</span><br/><span class="hl-0">getMitmproxyVersion</span><span class="hl-1">(): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1"> | </span><span class="hl-6">null</span><span class="hl-1">&gt;;</span><br/><span class="hl-0">autoInstallMitmproxy</span><span class="hl-1">(): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-5">boolean</span><span class="hl-1">&gt;;</span><br/><br/><span class="hl-3">// Process management</span><br/><span class="hl-0">startMitmweb</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">?: </span><span class="hl-5">MitmwebOptions</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;{ </span><span class="hl-5">pid</span><span class="hl-1">, </span><span class="hl-5">webUrl</span><span class="hl-1">, </span><span class="hl-5">proxyUrl</span><span class="hl-1">, </span><span class="hl-5">pidFile</span><span class="hl-1"> }&gt;;</span><br/><span class="hl-0">stopMitmweb</span><span class="hl-1">(</span><span class="hl-5">workingDir</span><span class="hl-1">?: </span><span class="hl-5">string</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-6">void</span><span class="hl-1">&gt;;</span><br/><span class="hl-0">getMitmwebStatus</span><span class="hl-1">(</span><span class="hl-5">workingDir</span><span class="hl-1">?: </span><span class="hl-5">string</span><span class="hl-1">): </span><span class="hl-5">MitmwebStatus</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<h3 id="domain-management-1" class="tsd-anchor-link">Domain Management<a href="#domain-management-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-0">addDomainWithAutoTls</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">: </span><span class="hl-5">AddDomainWithAutoTlsOptions</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-5">DomainConfig</span><span class="hl-1">&gt;;</span><br/><span class="hl-0">addDomainWithTls</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">: </span><span class="hl-5">AddDomainWithTlsOptions</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-5">DomainConfig</span><span class="hl-1">&gt;;</span><br/><span class="hl-0">updateDomain</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">: </span><span class="hl-5">UpdateDomainOptions</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-5">DomainConfig</span><span class="hl-1">&gt;;</span><br/><span class="hl-0">deleteDomain</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">: </span><span class="hl-5">DeleteDomainOptions</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-6">void</span><span class="hl-1">&gt;;</span><br/><span class="hl-0">getDomainConfig</span><span class="hl-1">(</span><span class="hl-5">domain</span><span class="hl-1">: </span><span class="hl-5">Domain</span><span class="hl-1">, </span><span class="hl-5">adminUrl</span><span class="hl-1">?: </span><span class="hl-5">string</span><span class="hl-1">): </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-5">DomainConfig</span><span class="hl-1"> | </span><span class="hl-6">null</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<h3 id="advanced-schemas" class="tsd-anchor-link">Advanced Schemas<a href="#advanced-schemas" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Zod-validated schemas for advanced Caddy configurations:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">// Duration (Go format)</span><br/><span class="hl-1">  </span><span class="hl-5">CaddyDurationSchema</span><span class="hl-1">, </span><span class="hl-3">// &quot;10s&quot;, &quot;1m30s&quot;, or nanoseconds</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// Health checks</span><br/><span class="hl-1">  </span><span class="hl-5">ActiveHealthChecksSchema</span><span class="hl-1">, </span><span class="hl-3">// uri, interval, timeout, expect_status, expect_body</span><br/><span class="hl-1">  </span><span class="hl-5">PassiveHealthChecksSchema</span><span class="hl-1">, </span><span class="hl-3">// fail_duration, max_fails, unhealthy_status</span><br/><span class="hl-1">  </span><span class="hl-5">HealthChecksSchema</span><span class="hl-1">, </span><span class="hl-3">// Combined active + passive</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// Load balancing</span><br/><span class="hl-1">  </span><span class="hl-5">LoadBalancingSchema</span><span class="hl-1">, </span><span class="hl-3">// selection_policy, retries, try_duration</span><br/><span class="hl-1">  </span><span class="hl-5">UpstreamSchema</span><span class="hl-1">, </span><span class="hl-3">// dial, max_requests</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// Route matching</span><br/><span class="hl-1">  </span><span class="hl-5">ExtendedRouteMatcherSchema</span><span class="hl-1">, </span><span class="hl-3">// client_ip, remote_ip, path_regexp, expression, not</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// Handler</span><br/><span class="hl-1">  </span><span class="hl-5">ReverseProxyHandlerSchema</span><span class="hl-1">, </span><span class="hl-3">// Full reverse proxy with health checks + load balancing</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@accelerated-software-development/caddy-api-client&quot;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<h3 id="extended-caddy-types" class="tsd-anchor-link">Extended Caddy Types<a href="#extended-caddy-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>For advanced configurations beyond our Zod-validated builders, we re-export comprehensive type definitions from <a href="https://github.com/CafuChino/caddy-json-types">caddy-json-types</a>:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-4">type</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">IConfig</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">IModulesCaddyhttpRoute</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">IModulesCaddyhttpReverseproxyHandler</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">IModulesCaddytlsConnectionPolicy</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@accelerated-software-development/caddy-api-client/caddy-types&quot;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<p><strong>Includes 591 types covering:</strong></p>
<ul>
<li>Full Caddy JSON configuration structure</li>
<li>50+ DNS providers for ACME challenges</li>
<li>Layer 4 (TCP/UDP) proxy configuration</li>
<li>PKI/CA management types</li>
<li>Storage backends (Redis, S3, DynamoDB, etc.)</li>
<li>All HTTP handlers, matchers, and encoders</li>
</ul>
<h2 id="error-handling" class="tsd-anchor-link">Error Handling<a href="#error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The library provides custom error classes:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">CaddyApiError</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">ValidationError</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">NetworkError</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">TimeoutError</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">DomainNotFoundError</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">MitmproxyNotInstalledError</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@accelerated-software-development/caddy-api-client&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">addRoute</span><span class="hl-1">(</span><span class="hl-2">&quot;https_server&quot;</span><span class="hl-1">, </span><span class="hl-5">route</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-4">catch</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1"> </span><span class="hl-6">instanceof</span><span class="hl-1"> </span><span class="hl-12">ValidationError</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Invalid route configuration:&quot;</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1">.</span><span class="hl-5">errors</span><span class="hl-1">);</span><br/><span class="hl-1">  } </span><span class="hl-4">else</span><span class="hl-1"> </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1"> </span><span class="hl-6">instanceof</span><span class="hl-1"> </span><span class="hl-12">CaddyApiError</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">`Caddy API error (</span><span class="hl-6">${</span><span class="hl-5">error</span><span class="hl-13">.</span><span class="hl-5">statusCode</span><span class="hl-6">}</span><span class="hl-2">):`</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1">.</span><span class="hl-5">responseBody</span><span class="hl-1">);</span><br/><span class="hl-1">  } </span><span class="hl-4">else</span><span class="hl-1"> </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1"> </span><span class="hl-6">instanceof</span><span class="hl-1"> </span><span class="hl-12">NetworkError</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Network error:&quot;</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1">.</span><span class="hl-5">cause</span><span class="hl-1">);</span><br/><span class="hl-1">  } </span><span class="hl-4">else</span><span class="hl-1"> </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1"> </span><span class="hl-6">instanceof</span><span class="hl-1"> </span><span class="hl-12">TimeoutError</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">`Request timed out after </span><span class="hl-6">${</span><span class="hl-5">error</span><span class="hl-13">.</span><span class="hl-5">timeoutMs</span><span class="hl-6">}</span><span class="hl-2">ms`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="examples" class="tsd-anchor-link">Examples<a href="#examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="tested-examples-always-current" class="tsd-anchor-link">Tested Examples (Always Current)<a href="#tested-examples-always-current" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Our <strong>integration tests</strong> serve as comprehensive, tested examples that are verified in CI:</p>
<ul>
<li><strong><a href="media/caddy-mitmproxy-flow.integration.test.ts">caddy-mitmproxy-flow.integration.test.ts</a></strong> - Complete MITMproxy integration patterns</li>
<li><strong><a href="media/asd-scenarios.integration.test.ts">asd-scenarios.integration.test.ts</a></strong> - Production routing scenarios (load balancing, multi-host, path-based)</li>
<li><strong><a href="media/critical-modules.integration.test.ts">critical-modules.integration.test.ts</a></strong> - All route builders, domain management, TLS</li>
</ul>
<p><strong>Run examples locally:</strong></p>
<pre><code class="bash"><span class="hl-3"># Start services</span><br/><span class="hl-0">docker</span><span class="hl-1"> </span><span class="hl-2">compose</span><span class="hl-1"> </span><span class="hl-6">-f</span><span class="hl-1"> </span><span class="hl-2">docker-compose.test.yml</span><span class="hl-1"> </span><span class="hl-2">up</span><span class="hl-1"> </span><span class="hl-6">-d</span><br/><br/><span class="hl-3"># Run all integration tests (86+ examples)</span><br/><span class="hl-5">INTEGRATION_TEST</span><span class="hl-1">=</span><span class="hl-2">true</span><span class="hl-1"> </span><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">test</span><span class="hl-1"> </span><span class="hl-2">src/__tests__/integration/</span><br/><br/><span class="hl-3"># Run specific example file</span><br/><span class="hl-5">INTEGRATION_TEST</span><span class="hl-1">=</span><span class="hl-2">true</span><span class="hl-1"> </span><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">test</span><span class="hl-1"> </span><span class="hl-2">src/__tests__/integration/caddy-mitmproxy-flow.integration.test.ts</span>
</code><button type="button">Copy</button></pre>

<h3 id="standalone-examples" class="tsd-anchor-link">Standalone Examples<a href="#standalone-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>See the <a href="media/examples"><code>examples/</code></a> directory for standalone examples (require published package):</p>
<ul>
<li><a href="media/basic-usage.ts"><code>basic-usage.ts</code></a> - Basic route management</li>
<li><a href="media/load-balancer.ts"><code>load-balancer.ts</code></a> - Load balancing with health checks</li>
<li><a href="media/mitmproxy-integration.ts"><code>mitmproxy-integration.ts</code></a> - Traffic inspection with MITMproxy</li>
</ul>
<h2 id="api-documentation" class="tsd-anchor-link">API Documentation<a href="#api-documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>📚 <strong><a href="https://asd-engineering.github.io/asd-caddy-api-client/">View Full API Documentation</a></strong> ← Auto-generated from source code</p>
<p>Full API documentation is generated using TypeDoc and hosted on GitHub Pages. It includes detailed information for all exported functions, classes, and types with examples.</p>
<p><strong>Generate locally:</strong></p>
<pre><code class="bash"><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">docs:build</span><span class="hl-1">      </span><span class="hl-3"># Generate docs</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">docs:serve</span><span class="hl-1">      </span><span class="hl-3"># Generate and open in browser</span>
</code><button type="button">Copy</button></pre>

<h2 id="development" class="tsd-anchor-link">Development<a href="#development" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-3"># Install dependencies</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">install</span><br/><br/><span class="hl-3"># Build</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build</span><br/><br/><span class="hl-3"># Test</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span><br/><br/><span class="hl-3"># Type check</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">typecheck</span><br/><br/><span class="hl-3"># Lint</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">lint</span><br/><br/><span class="hl-3"># Format</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">format</span>
</code><button type="button">Copy</button></pre>

<h2 id="contributing" class="tsd-anchor-link">Contributing<a href="#contributing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Contributions are welcome! Please <a href="https://github.com/asd-engineering/asd-caddy-api-client/issues">open an issue</a> or submit a pull request if you have any improvements or fixes.</p>
<ol>
<li>Fork the repository</li>
<li>Create a new branch (<code>git checkout -b my-feature-branch</code>)</li>
<li>Make your changes</li>
<li>Commit your changes (<code>git commit -am 'Add new feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-feature-branch</code>)</li>
<li>Create a new Pull Request</li>
</ol>
<h2 id="license" class="tsd-anchor-link">License<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This project is licensed under the MIT License. See the <a href="media/LICENSE">LICENSE</a> file for details.</p>
<h2 id="acknowledgements" class="tsd-anchor-link">Acknowledgements<a href="#acknowledgements" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This project is not affiliated with or endorsed by the Caddy project. It is an independent project created to improve the developer experience when working with Caddy JSON configurations in TypeScript.</p>
<p>For more information on Caddy and its configuration options, please visit the <a href="https://caddyserver.com/docs/">official Caddy documentation</a>.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#accelerated-software-developmentcaddy-api-client"><span>@accelerated-<wbr/>software-<wbr/>development/caddy-<wbr/>api-<wbr/>client</span></a><ul><li><a href="#features"><span>Features</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#quick-start"><span>Quick <wbr/>Start</span></a></li><li><a href="#usage"><span>Usage</span></a></li><li><ul><li><a href="#basic-route-management"><span>Basic <wbr/>Route <wbr/>Management</span></a></li><li><a href="#path-based-routes"><span>Path-<wbr/>based <wbr/>Routes</span></a></li><li><a href="#load-balancing"><span>Load <wbr/>Balancing</span></a></li><li><a href="#security-headers"><span>Security <wbr/>Headers</span></a></li><li><a href="#basic-authentication"><span>Basic <wbr/>Authentication</span></a></li><li><a href="#mitmproxy-integration"><span>MIT<wbr/>Mproxy <wbr/>Integration</span></a></li><li><ul><li><a href="#quick-start-1"><span>Quick <wbr/>Start</span></a></li><li><a href="#hot-swapping-between-direct-and-proxied-routing"><span>Hot-<wbr/>Swapping <wbr/>Between <wbr/>Direct and <wbr/>Proxied <wbr/>Routing</span></a></li><li><a href="#load-balancing-with-mitmproxy"><span>Load <wbr/>Balancing with <wbr/>MIT<wbr/>Mproxy</span></a></li><li><a href="#docker-compose-setup"><span>Docker <wbr/>Compose <wbr/>Setup</span></a></li></ul></li><li><a href="#domain-management"><span>Domain <wbr/>Management</span></a></li></ul></li><li><a href="#api-reference"><span>API <wbr/>Reference</span></a></li><li><ul><li><a href="#caddyclient"><span>Caddy<wbr/>Client</span></a></li><li><a href="#route-builders"><span>Route <wbr/>Builders</span></a></li><li><a href="#mitmweb-functions"><span>MIT<wbr/>Mweb <wbr/>Functions</span></a></li><li><a href="#domain-management-1"><span>Domain <wbr/>Management</span></a></li><li><a href="#advanced-schemas"><span>Advanced <wbr/>Schemas</span></a></li><li><a href="#extended-caddy-types"><span>Extended <wbr/>Caddy <wbr/>Types</span></a></li></ul></li><li><a href="#error-handling"><span>Error <wbr/>Handling</span></a></li><li><a href="#examples"><span>Examples</span></a></li><li><ul><li><a href="#tested-examples-always-current"><span>Tested <wbr/>Examples (<wbr/>Always <wbr/>Current)</span></a></li><li><a href="#standalone-examples"><span>Standalone <wbr/>Examples</span></a></li></ul></li><li><a href="#api-documentation"><span>API <wbr/>Documentation</span></a></li><li><a href="#development"><span>Development</span></a></li><li><a href="#contributing"><span>Contributing</span></a></li><li><a href="#license"><span>License</span></a></li><li><a href="#acknowledgements"><span>Acknowledgements</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/asd-engineering/asd-caddy-api-client" class="tsd-nav-link">GitHub</a><a href="https://github.com/asd-engineering/asd-caddy-api-client/tree/main/src/__tests__/integration" class="tsd-nav-link">Integration Tests</a></nav><nav class="tsd-navigation"><a href="modules.html">@accelerated-software-development/caddy-api-client - v0.2.1</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
